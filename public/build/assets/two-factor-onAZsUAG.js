import{c as L,j as r,r as i,F as se,u as We}from"./app-CIL_l6sS.js";import{H as qe,S as Ve}from"./layout-Cgh27PCM.js";import{B as K}from"./button-D08mE_WT.js";import{a as ze,b as Ge,c as Ke,C as Qe,d as Je}from"./card-C2oWoqI9.js";import{A as Xe,a as Ze,b as Ue}from"./alert-CN9E4uli.js";import{c as Q,f as ae,u as Ye}from"./index-wcISt1iz.js";import{a as et,E as tt}from"./eye-Ciaw50eg.js";import{I as nt}from"./input-error-CW2ZNMjW.js";import{a as rt,b as ot,g as lt,e as st,f as at}from"./dialog-BdeZ1T2k.js";import{S as je}from"./spinner-D11iODAn.js";import{C as it}from"./check-B2cE6KjB.js";import{B as Se}from"./badge-DHFuweyh.js";import{A as ct}from"./app-layout-2kYn1rO1.js";/* empty css            */import"./separator-S2WcJ8bx.js";import"./index-Ci_d-GV7.js";import"./index-Cfsnr-0E.js";import"./index-BWBkuQUU.js";import"./index-Df1HFTyl.js";import"./Combination-zaUZCHVX.js";import"./index-DYCE0mEw.js";import"./x-nSGHELjw.js";import"./loader-circle-zTYS1g8B.js";import"./index-D215SVxA.js";import"./dropdown-menu-BVEDhLcS.js";import"./index-6N2y4yE4.js";import"./language-switch-C-41CEX-.js";const ut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],dt=Q("CircleAlert",ut);const ft=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pt=Q("Copy",ft);const mt=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],ht=Q("LockKeyhole",mt);const xt=[["path",{d:"M5 12h14",key:"1ays0h"}]],vt=Q("Minus",xt);const gt=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yt=Q("RefreshCw",gt);const bt=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],wt=Q("ScanLine",bt);const jt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]],St=Q("ShieldBan",jt);const _t=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_e=Q("ShieldCheck",_t);function Ne(n){const e=L.c(8),{errors:t,title:o}=n;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(dt,{}),e[0]=a):a=e[0];const l=o||"Something went wrong.";let s;e[1]!==l?(s=r.jsx(Ze,{children:l}),e[1]=l,e[2]=s):s=e[2];let u;e[3]!==t?(u=r.jsx(Xe,{children:r.jsx("ul",{className:"list-inside list-disc text-sm",children:Array.from(new Set(t)).map(Ct)})}),e[3]=t,e[4]=u):u=e[4];let c;return e[5]!==s||e[6]!==u?(c=r.jsxs(Ue,{variant:"destructive",children:[a,s,u]}),e[5]=s,e[6]=u,e[7]=c):c=e[7],c}function Ct(n,e){return r.jsx("li",{children:n},e)}function Nt(n){const e=L.c(32),{recoveryCodesList:t,fetchRecoveryCodes:o,errors:a}=n,[l,s]=i.useState(!1),u=i.useRef(null),c=t.length>0&&l;let g;e[0]!==l||e[1]!==o||e[2]!==t.length?(g=async()=>{!l&&!t.length&&await o(),s(!l),l||setTimeout(()=>{u.current?.scrollIntoView({behavior:"smooth",block:"nearest"})})},e[0]=l,e[1]=o,e[2]=t.length,e[3]=g):g=e[3];const p=g;let y,m;e[4]!==o||e[5]!==t.length?(y=()=>{t.length||o()},m=[t.length,o],e[4]=o,e[5]=t.length,e[6]=y,e[7]=m):(y=e[6],m=e[7]),i.useEffect(y,m);const b=l?et:tt;let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsxs(ze,{children:[r.jsxs(Ge,{className:"flex gap-3",children:[r.jsx(ht,{className:"size-4","aria-hidden":"true"}),"2FA Recovery Codes"]}),r.jsx(Ke,{children:"Recovery codes let you regain access if you lose your 2FA device. Store them in a secure password manager."})]}),e[8]=v):v=e[8];let j;e[9]!==b?(j=r.jsx(b,{className:"size-4","aria-hidden":"true"}),e[9]=b,e[10]=j):j=e[10];const k=l?"Hide":"View";let f;e[11]!==l||e[12]!==j||e[13]!==k||e[14]!==p?(f=r.jsxs(K,{onClick:p,className:"w-fit","aria-expanded":l,"aria-controls":"recovery-codes-section",children:[j,k," Recovery Codes"]}),e[11]=l,e[12]=j,e[13]=k,e[14]=p,e[15]=f):f=e[15];let S;e[16]!==c||e[17]!==o?(S=c&&r.jsx(se,{method:"post",action:"/two-factor/regenerate-recovery-codes",options:{preserveScroll:!0},onSuccess:o,children:Tt}),e[16]=c,e[17]=o,e[18]=S):S=e[18];let E;e[19]!==f||e[20]!==S?(E=r.jsxs("div",{className:"flex flex-col gap-3 select-none sm:flex-row sm:items-center sm:justify-between",children:[f,S]}),e[19]=f,e[20]=S,e[21]=E):E=e[21];const P=`relative overflow-hidden transition-all duration-300 ${l?"h-auto opacity-100":"h-0 opacity-0"}`,$=!l;let _;e[22]!==a||e[23]!==t?(_=r.jsx("div",{className:"mt-3 space-y-3",children:a?.length?r.jsx(Ne,{errors:a}):r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:u,className:"grid gap-1 rounded-lg bg-muted p-4 font-mono text-sm",role:"list","aria-label":"Recovery codes",children:t.length?t.map(Et):r.jsx("div",{className:"space-y-2","aria-label":"Loading recovery codes",children:Array.from({length:8},kt)})}),r.jsx("div",{className:"text-xs text-muted-foreground select-none",children:r.jsxs("p",{id:"regenerate-warning",children:["Each recovery code can be used once to access your account and will be removed after use. If you need more, click"," ",r.jsx("span",{className:"font-bold",children:"Regenerate Codes"})," ","above."]})})]})}),e[22]=a,e[23]=t,e[24]=_):_=e[24];let C;e[25]!==P||e[26]!==$||e[27]!==_?(C=r.jsx("div",{id:"recovery-codes-section",className:P,"aria-hidden":$,children:_}),e[25]=P,e[26]=$,e[27]=_,e[28]=C):C=e[28];let T;return e[29]!==C||e[30]!==E?(T=r.jsxs(Qe,{children:[v,r.jsxs(Je,{children:[E,C]})]}),e[29]=C,e[30]=E,e[31]=T):T=e[31],T}function kt(n,e){return r.jsx("div",{className:"h-4 animate-pulse rounded bg-muted-foreground/20","aria-hidden":"true"},e)}function Et(n,e){return r.jsx("div",{role:"listitem",className:"select-text",children:n},e)}function Tt(n){const{processing:e}=n;return r.jsxs(K,{variant:"secondary",type:"submit",disabled:e,"aria-describedby":"regenerate-warning",children:[r.jsx(yt,{})," Regenerate Codes"]})}var Mt=Object.defineProperty,Rt=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Ce=(n,e,t)=>e in n?Mt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,At=(n,e)=>{for(var t in e||(e={}))ke.call(e,t)&&Ce(n,t,e[t]);if(ie)for(var t of ie(e))Ee.call(e,t)&&Ce(n,t,e[t]);return n},$t=(n,e)=>Rt(n,Pt(e)),Ft=(n,e)=>{var t={};for(var o in n)ke.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&ie)for(var o of ie(n))e.indexOf(o)<0&&Ee.call(n,o)&&(t[o]=n[o]);return t};function Dt(n){let e=setTimeout(n,0),t=setTimeout(n,10),o=setTimeout(n,50);return[e,t,o]}function Ot(n){let e=i.useRef();return i.useEffect(()=>{e.current=n}),e.current}var It=18,Te=40,Bt=`${Te}px`,Lt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Ht({containerRef:n,inputRef:e,pushPasswordManagerStrategy:t,isFocused:o}){let[a,l]=i.useState(!1),[s,u]=i.useState(!1),[c,g]=i.useState(!1),p=i.useMemo(()=>t==="none"?!1:(t==="increase-width"||t==="experimental-no-flickering")&&a&&s,[a,s,t]),y=i.useCallback(()=>{let m=n.current,b=e.current;if(!m||!b||c||t==="none")return;let v=m,j=v.getBoundingClientRect().left+v.offsetWidth,k=v.getBoundingClientRect().top+v.offsetHeight/2,f=j-It,S=k;document.querySelectorAll(Lt).length===0&&document.elementFromPoint(f,S)===m||(l(!0),g(!0))},[n,e,c,t]);return i.useEffect(()=>{let m=n.current;if(!m||t==="none")return;function b(){let j=window.innerWidth-m.getBoundingClientRect().right;u(j>=Te)}b();let v=setInterval(b,1e3);return()=>{clearInterval(v)}},[n,t]),i.useEffect(()=>{let m=o||document.activeElement===e.current;if(t==="none"||!m)return;let b=setTimeout(y,0),v=setTimeout(y,2e3),j=setTimeout(y,5e3),k=setTimeout(()=>{g(!0)},6e3);return()=>{clearTimeout(b),clearTimeout(v),clearTimeout(j),clearTimeout(k)}},[e,o,t,y]),{hasPWMBadge:a,willPushPWMBadge:p,PWM_BADGE_SPACE_WIDTH:Bt}}var Me=i.createContext({}),Re=i.forwardRef((n,e)=>{var t=n,{value:o,onChange:a,maxLength:l,textAlign:s="left",pattern:u,placeholder:c,inputMode:g="numeric",onComplete:p,pushPasswordManagerStrategy:y="increase-width",pasteTransformer:m,containerClassName:b,noScriptCSSFallback:v=Wt,render:j,children:k}=t,f=Ft(t,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),S,E,P,$,_;let[C,T]=i.useState(typeof f.defaultValue=="string"?f.defaultValue:""),h=o??C,R=Ot(h),F=i.useCallback(d=>{a?.(d),T(d)},[a]),N=i.useMemo(()=>u?typeof u=="string"?new RegExp(u):u:null,[u]),w=i.useRef(null),I=i.useRef(null),O=i.useRef({value:h,onChange:F,isIOS:typeof window<"u"&&((E=(S=window?.CSS)==null?void 0:S.supports)==null?void 0:E.call(S,"-webkit-touch-callout","none"))}),A=i.useRef({prev:[(P=w.current)==null?void 0:P.selectionStart,($=w.current)==null?void 0:$.selectionEnd,(_=w.current)==null?void 0:_.selectionDirection]});i.useImperativeHandle(e,()=>w.current,[]),i.useEffect(()=>{let d=w.current,x=I.current;if(!d||!x)return;O.current.value!==d.value&&O.current.onChange(d.value),A.current.prev=[d.selectionStart,d.selectionEnd,d.selectionDirection];function D(){if(document.activeElement!==d){ne(null),re(null);return}let M=d.selectionStart,B=d.selectionEnd,le=d.selectionDirection,q=d.maxLength,X=d.value,V=A.current.prev,z=-1,G=-1,Z;if(X.length!==0&&M!==null&&B!==null){let Be=M===B,Le=M===X.length&&X.length<q;if(Be&&!Le){let U=M;if(U===0)z=0,G=1,Z="forward";else if(U===q)z=U-1,G=U,Z="backward";else if(q>1&&X.length>1){let de=0;if(V[0]!==null&&V[1]!==null){Z=U<V[1]?"backward":"forward";let He=V[0]===V[1]&&V[0]<q;Z==="backward"&&!He&&(de=-1)}z=de+U,G=de+U+1}}z!==-1&&G!==-1&&z!==G&&w.current.setSelectionRange(z,G,Z)}let be=z!==-1?z:M,we=G!==-1?G:B,Ie=Z??le;ne(be),re(we),A.current.prev=[be,we,Ie]}if(document.addEventListener("selectionchange",D,{capture:!0}),D(),document.activeElement===d&&ce(!0),!document.getElementById("input-otp-style")){let M=document.createElement("style");if(M.id="input-otp-style",document.head.appendChild(M),M.sheet){let B="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";oe(M.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),oe(M.sheet,`[data-input-otp]:autofill { ${B} }`),oe(M.sheet,`[data-input-otp]:-webkit-autofill { ${B} }`),oe(M.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),oe(M.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let H=()=>{x&&x.style.setProperty("--root-height",`${d.clientHeight}px`)};H();let W=new ResizeObserver(H);return W.observe(d),()=>{document.removeEventListener("selectionchange",D,{capture:!0}),W.disconnect()}},[]);let[me,he]=i.useState(!1),[te,ce]=i.useState(!1),[J,ne]=i.useState(null),[Y,re]=i.useState(null);i.useEffect(()=>{Dt(()=>{var d,x,D,H;(d=w.current)==null||d.dispatchEvent(new Event("input"));let W=(x=w.current)==null?void 0:x.selectionStart,M=(D=w.current)==null?void 0:D.selectionEnd,B=(H=w.current)==null?void 0:H.selectionDirection;W!==null&&M!==null&&(ne(W),re(M),A.current.prev=[W,M,B])})},[h,te]),i.useEffect(()=>{R!==void 0&&h!==R&&R.length<l&&h.length===l&&p?.(h)},[l,p,R,h]);let ee=Ht({containerRef:I,inputRef:w,pushPasswordManagerStrategy:y,isFocused:te}),xe=i.useCallback(d=>{let x=d.currentTarget.value.slice(0,l);if(x.length>0&&N&&!N.test(x)){d.preventDefault();return}typeof R=="string"&&x.length<R.length&&document.dispatchEvent(new Event("selectionchange")),F(x)},[l,F,R,N]),ve=i.useCallback(()=>{var d;if(w.current){let x=Math.min(w.current.value.length,l-1),D=w.current.value.length;(d=w.current)==null||d.setSelectionRange(x,D),ne(x),re(D)}ce(!0)},[l]),ge=i.useCallback(d=>{var x,D;let H=w.current;if(!m&&(!O.current.isIOS||!d.clipboardData||!H))return;let W=d.clipboardData.getData("text/plain"),M=m?m(W):W;d.preventDefault();let B=(x=w.current)==null?void 0:x.selectionStart,le=(D=w.current)==null?void 0:D.selectionEnd,q=(B!==le?h.slice(0,B)+M+h.slice(le):h.slice(0,B)+M+h.slice(B)).slice(0,l);if(q.length>0&&N&&!N.test(q))return;H.value=q,F(q);let X=Math.min(q.length,l-1),V=q.length;H.setSelectionRange(X,V),ne(X),re(V)},[l,F,N,h]),Fe=i.useMemo(()=>({position:"relative",cursor:f.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[f.disabled]),ye=i.useMemo(()=>({position:"absolute",inset:0,width:ee.willPushPWMBadge?`calc(100% + ${ee.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:ee.willPushPWMBadge?`inset(0 ${ee.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:s,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[ee.PWM_BADGE_SPACE_WIDTH,ee.willPushPWMBadge,s]),De=i.useMemo(()=>i.createElement("input",$t(At({autoComplete:f.autoComplete||"one-time-code"},f),{"data-input-otp":!0,"data-input-otp-placeholder-shown":h.length===0||void 0,"data-input-otp-mss":J,"data-input-otp-mse":Y,inputMode:g,pattern:N?.source,"aria-placeholder":c,style:ye,maxLength:l,value:h,ref:w,onPaste:d=>{var x;ge(d),(x=f.onPaste)==null||x.call(f,d)},onChange:xe,onMouseOver:d=>{var x;he(!0),(x=f.onMouseOver)==null||x.call(f,d)},onMouseLeave:d=>{var x;he(!1),(x=f.onMouseLeave)==null||x.call(f,d)},onFocus:d=>{var x;ve(),(x=f.onFocus)==null||x.call(f,d)},onBlur:d=>{var x;ce(!1),(x=f.onBlur)==null||x.call(f,d)}})),[xe,ve,ge,g,ye,l,Y,J,f,N?.source,h]),ue=i.useMemo(()=>({slots:Array.from({length:l}).map((d,x)=>{var D;let H=te&&J!==null&&Y!==null&&(J===Y&&x===J||x>=J&&x<Y),W=h[x]!==void 0?h[x]:null,M=h[0]!==void 0?null:(D=c?.[x])!=null?D:null;return{char:W,placeholderChar:M,isActive:H,hasFakeCaret:H&&W===null}}),isFocused:te,isHovering:!f.disabled&&me}),[te,me,l,Y,J,f.disabled,h]),Oe=i.useMemo(()=>j?j(ue):i.createElement(Me.Provider,{value:ue},k),[k,ue,j]);return i.createElement(i.Fragment,null,v!==null&&i.createElement("noscript",null,i.createElement("style",null,v)),i.createElement("div",{ref:I,"data-input-otp-container":!0,style:Fe,className:b},Oe,i.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},De)))});Re.displayName="Input";function oe(n,e){try{n.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var Wt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,qt="^\\d+$";const Pe=i.forwardRef((n,e)=>{const t=L.c(13);let o,a,l;t[0]!==n?({className:o,containerClassName:a,...l}=n,t[0]=n,t[1]=o,t[2]=a,t[3]=l):(o=t[1],a=t[2],l=t[3]);let s;t[4]!==a?(s=ae("flex items-center gap-2 has-[:disabled]:opacity-50",a),t[4]=a,t[5]=s):s=t[5];let u;t[6]!==o?(u=ae("disabled:cursor-not-allowed",o),t[6]=o,t[7]=u):u=t[7];let c;return t[8]!==l||t[9]!==e||t[10]!==s||t[11]!==u?(c=r.jsx(Re,{ref:e,containerClassName:s,className:u,...l}),t[8]=l,t[9]=e,t[10]=s,t[11]=u,t[12]=c):c=t[12],c});Pe.displayName="InputOTP";const Ae=i.forwardRef((n,e)=>{const t=L.c(9);let o,a;t[0]!==n?({className:o,...a}=n,t[0]=n,t[1]=o,t[2]=a):(o=t[1],a=t[2]);let l;t[3]!==o?(l=ae("flex items-center",o),t[3]=o,t[4]=l):l=t[4];let s;return t[5]!==a||t[6]!==e||t[7]!==l?(s=r.jsx("div",{ref:e,className:l,...a}),t[5]=a,t[6]=e,t[7]=l,t[8]=s):s=t[8],s});Ae.displayName="InputOTPGroup";const $e=i.forwardRef((n,e)=>{const t=L.c(15);let o,a,l;t[0]!==n?({index:a,className:o,...l}=n,t[0]=n,t[1]=o,t[2]=a,t[3]=l):(o=t[1],a=t[2],l=t[3]);const s=i.useContext(Me),{char:u,hasFakeCaret:c,isActive:g}=s.slots[a],p=g&&"z-10 ring-1 ring-ring";let y;t[4]!==o||t[5]!==p?(y=ae("relative flex h-9 w-9 items-center justify-center border-y border-e border-input text-sm shadow-sm transition-all first:rounded-s-md first:border-s last:rounded-e-md",p,o),t[4]=o,t[5]=p,t[6]=y):y=t[6];let m;t[7]!==c?(m=c&&r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})}),t[7]=c,t[8]=m):m=t[8];let b;return t[9]!==u||t[10]!==l||t[11]!==e||t[12]!==y||t[13]!==m?(b=r.jsxs("div",{ref:e,className:y,...l,children:[u,m]}),t[9]=u,t[10]=l,t[11]=e,t[12]=y,t[13]=m,t[14]=b):b=t[14],b});$e.displayName="InputOTPSlot";const Vt=i.forwardRef((n,e)=>{const t=L.c(6);let o;t[0]!==n?({...o}=n,t[0]=n,t[1]=o):o=t[1];let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(vt,{}),t[2]=a):a=t[2];let l;return t[3]!==o||t[4]!==e?(l=r.jsx("div",{ref:e,role:"separator",...o,children:a}),t[3]=o,t[4]=e,t[5]=l):l=t[5],l});Vt.displayName="InputOTPSeparator";function zt(){const n=L.c(3),[e,t]=i.useState(null);let o;n[0]===Symbol.for("react.memo_cache_sentinel")?(o=async s=>{if(!navigator?.clipboard)return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(s),t(s),!0}catch(u){return console.warn("Copy failed",u),t(null),!1}},n[0]=o):o=n[0];const a=o;let l;return n[1]!==e?(l=[e,a],n[1]=e,n[2]=l):l=n[2],l}const fe=6,pe=async n=>{const e=await fetch(n,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Failed to fetch: ${e.status}`);return e.json()},Gt=()=>{const n=L.c(14),[e,t]=i.useState(null),[o,a]=i.useState(null);let l;n[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],n[0]=l):l=n[0];const[s,u]=i.useState(l);let c;n[1]===Symbol.for("react.memo_cache_sentinel")?(c=[],n[1]=c):c=n[1];const[g,p]=i.useState(c),y=e!==null&&o!==null;let m;n[2]===Symbol.for("react.memo_cache_sentinel")?(m=async()=>{try{const{svg:h}=await pe("/two-factor/qr-code");t(h)}catch{p(Kt),t(null)}},n[2]=m):m=n[2];const b=m;let v;n[3]===Symbol.for("react.memo_cache_sentinel")?(v=async()=>{try{const{secretKey:h}=await pe("/two-factor/secret-key");a(h)}catch{p(Qt),a(null)}},n[3]=v):v=n[3];const j=v;let k;n[4]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{p([])},n[4]=k):k=n[4];const f=k;let S;n[5]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{a(null),t(null),f()},n[5]=S):S=n[5];const E=S;let P;n[6]===Symbol.for("react.memo_cache_sentinel")?(P=async()=>{try{f();const h=await pe("/two-factor/recovery-codes");u(h)}catch{p(Jt),u([])}},n[6]=P):P=n[6];const $=P;let _;n[7]===Symbol.for("react.memo_cache_sentinel")?(_=async()=>{try{f(),await Promise.all([b(),j()])}catch{t(null),a(null)}},n[7]=_):_=n[7];const C=_;let T;return n[8]!==g||n[9]!==y||n[10]!==o||n[11]!==e||n[12]!==s?(T={qrCodeSvg:e,manualSetupKey:o,recoveryCodesList:s,hasSetupData:y,errors:g,clearErrors:f,clearSetupData:E,fetchQrCode:b,fetchSetupKey:j,fetchSetupData:C,fetchRecoveryCodes:$},n[8]=g,n[9]=y,n[10]=o,n[11]=e,n[12]=s,n[13]=T):T=n[13],T};function Kt(n){return[...n,"Failed to fetch QR code"]}function Qt(n){return[...n,"Failed to fetch a setup key"]}function Jt(n){return[...n,"Failed to fetch recovery codes"]}function Xt(){const n=L.c(2);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"absolute inset-0 grid grid-cols-5 opacity-50",children:Array.from({length:5},Ut)}),n[0]=e):e=n[0];let t;return n[1]===Symbol.for("react.memo_cache_sentinel")?(t=r.jsx("div",{className:"mb-3 rounded-full border border-border bg-card p-0.5 shadow-sm",children:r.jsxs("div",{className:"relative overflow-hidden rounded-full border border-border bg-muted p-2.5",children:[e,r.jsx("div",{className:"absolute inset-0 grid grid-rows-5 opacity-50",children:Array.from({length:5},Zt)}),r.jsx(wt,{className:"relative z-20 size-6 text-foreground"})]})}),n[1]=t):t=n[1],t}function Zt(n,e){return r.jsx("div",{className:"border-b border-border last:border-b-0"},`row-${e+1}`)}function Ut(n,e){return r.jsx("div",{className:"border-r border-border last:border-r-0"},`col-${e+1}`)}function Yt(n){const e=L.c(8),{qrCodeSvg:t,manualSetupKey:o,buttonText:a,onNextStep:l,errors:s}=n,[u,c]=zt(),g=u===o?it:pt;let p;return e[0]!==g||e[1]!==a||e[2]!==c||e[3]!==s||e[4]!==o||e[5]!==l||e[6]!==t?(p=r.jsx(r.Fragment,{children:s?.length?r.jsx(Ne,{errors:s}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mx-auto flex max-w-md overflow-hidden",children:r.jsx("div",{className:"mx-auto aspect-square w-64 rounded-lg border border-border",children:r.jsx("div",{className:"z-10 flex h-full w-full items-center justify-center p-5",children:t?r.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):r.jsx(je,{})})})}),r.jsx("div",{className:"flex w-full space-x-5",children:r.jsx(K,{className:"w-full",onClick:l,children:a})}),r.jsxs("div",{className:"relative flex w-full items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 top-1/2 h-px w-full bg-border"}),r.jsx("span",{className:"relative bg-card px-2 py-1",children:"or, enter the code manually"})]}),r.jsx("div",{className:"flex w-full space-x-2",children:r.jsx("div",{className:"flex w-full items-stretch overflow-hidden rounded-xl border border-border",children:o?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",readOnly:!0,value:o,className:"h-full w-full bg-background p-3 text-foreground outline-none"}),r.jsx("button",{onClick:()=>c(o),className:"border-l border-border px-3 hover:bg-muted",children:r.jsx(g,{className:"w-4"})})]}):r.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted p-3",children:r.jsx(je,{})})})})]})}),e[0]=g,e[1]=a,e[2]=c,e[3]=s,e[4]=o,e[5]=l,e[6]=t,e[7]=p):p=e[7],p}function en(n){const e=L.c(10),{onClose:t,onBack:o}=n,[a,l]=i.useState(""),s=i.useRef(null);let u,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{setTimeout(()=>{s.current?.querySelector("input")?.focus()},0)},c=[],e[0]=u,e[1]=c):(u=e[0],c=e[1]),i.useEffect(u,c);let g;e[2]!==t?(g=()=>t(),e[2]=t,e[3]=g):g=e[3];let p;e[4]!==a||e[5]!==o?(p=m=>{const{processing:b,errors:v}=m;return r.jsx(r.Fragment,{children:r.jsxs("div",{ref:s,className:"relative w-full space-y-3",children:[r.jsxs("div",{className:"flex w-full flex-col items-center space-y-3 py-2",children:[r.jsx(Pe,{id:"otp",name:"code",maxLength:fe,onChange:l,disabled:b,pattern:qt,children:r.jsx(Ae,{children:Array.from({length:fe},tn)})}),r.jsx(nt,{message:v?.confirmTwoFactorAuthentication?.code})]}),r.jsxs("div",{className:"flex w-full space-x-5",children:[r.jsx(K,{type:"button",variant:"outline",className:"flex-1",onClick:o,disabled:b,children:"Back"}),r.jsx(K,{type:"submit",className:"flex-1",disabled:b||a.length<fe,children:"Confirm"})]})]})})},e[4]=a,e[5]=o,e[6]=p):p=e[6];let y;return e[7]!==g||e[8]!==p?(y=r.jsx(se,{method:"post",action:"/two-factor/verify",onSuccess:g,resetOnError:!0,resetOnSuccess:!0,children:p}),e[7]=g,e[8]=p,e[9]=y):y=e[9],y}function tn(n,e){return r.jsx($e,{index:e},e)}function nn(n){const e=L.c(43),{isOpen:t,onClose:o,requiresConfirmation:a,twoFactorEnabled:l,qrCodeSvg:s,manualSetupKey:u,clearSetupData:c,fetchSetupData:g,errors:p}=n,[y,m]=i.useState(!1);let b;e:{if(l){let A;e[0]===Symbol.for("react.memo_cache_sentinel")?(A={title:"Two-Factor Authentication Enabled",description:"Two-factor authentication is now enabled. Scan the QR code or enter the setup key in your authenticator app.",buttonText:"Close"},e[0]=A):A=e[0],b=A;break e}if(y){let A;e[1]===Symbol.for("react.memo_cache_sentinel")?(A={title:"Verify Authentication Code",description:"Enter the 6-digit code from your authenticator app",buttonText:"Continue"},e[1]=A):A=e[1],b=A;break e}let O;e[2]===Symbol.for("react.memo_cache_sentinel")?(O={title:"Enable Two-Factor Authentication",description:"To finish enabling two-factor authentication, scan the QR code or enter the setup key in your authenticator app",buttonText:"Continue"},e[2]=O):O=e[2],b=O}const v=b;let j;e[3]!==c||e[4]!==o||e[5]!==a?(j=()=>{if(a){m(!0);return}c(),o()},e[3]=c,e[4]=o,e[5]=a,e[6]=j):j=e[6];const k=j;let f;e[7]!==c||e[8]!==l?(f=()=>{m(!1),l&&c()},e[7]=c,e[8]=l,e[9]=f):f=e[9];const S=f;let E,P;e[10]!==g||e[11]!==t||e[12]!==s?(E=()=>{t&&!s&&g()},P=[t,s,g],e[10]=g,e[11]=t,e[12]=s,e[13]=E,e[14]=P):(E=e[13],P=e[14]),i.useEffect(E,P);let $;e[15]!==o||e[16]!==S?($=()=>{S(),o()},e[15]=o,e[16]=S,e[17]=$):$=e[17];const _=$;let C;e[18]!==_?(C=O=>!O&&_(),e[18]=_,e[19]=C):C=e[19];let T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(Xt,{}),e[20]=T):T=e[20];let h;e[21]!==v.title?(h=r.jsx(rt,{children:v.title}),e[21]=v.title,e[22]=h):h=e[22];let R;e[23]!==v.description?(R=r.jsx(ot,{className:"text-center",children:v.description}),e[23]=v.description,e[24]=R):R=e[24];let F;e[25]!==R||e[26]!==h?(F=r.jsxs(lt,{className:"flex items-center justify-center",children:[T,h,R]}),e[25]=R,e[26]=h,e[27]=F):F=e[27];let N;e[28]!==p||e[29]!==k||e[30]!==u||e[31]!==v.buttonText||e[32]!==o||e[33]!==s||e[34]!==y?(N=r.jsx("div",{className:"flex flex-col items-center space-y-5",children:y?r.jsx(en,{onClose:o,onBack:()=>m(!1)}):r.jsx(Yt,{qrCodeSvg:s,manualSetupKey:u,buttonText:v.buttonText,onNextStep:k,errors:p})}),e[28]=p,e[29]=k,e[30]=u,e[31]=v.buttonText,e[32]=o,e[33]=s,e[34]=y,e[35]=N):N=e[35];let w;e[36]!==F||e[37]!==N?(w=r.jsxs(st,{className:"sm:max-w-md",children:[F,N]}),e[36]=F,e[37]=N,e[38]=w):w=e[38];let I;return e[39]!==t||e[40]!==w||e[41]!==C?(I=r.jsx(at,{open:t,onOpenChange:C,children:w}),e[39]=t,e[40]=w,e[41]=C,e[42]=I):I=e[42],I}function Rn(n){const e=L.c(40),{requiresConfirmation:t,twoFactorEnabled:o}=n,a=t===void 0?!1:t,l=o===void 0?!1:o,{t:s}=Ye("settings"),{panel:u}=We().props;let c;e[0]!==s?(c=s("two_factor_auth.page_title"),e[0]=s,e[1]=c):c=e[1];const g=`/${u}/settings/two-factor`;let p;e[2]!==c||e[3]!==g?(p=[{title:c,href:g}],e[2]=c,e[3]=g,e[4]=p):p=e[4];const y=p,{qrCodeSvg:m,hasSetupData:b,manualSetupKey:v,clearSetupData:j,fetchSetupData:k,recoveryCodesList:f,fetchRecoveryCodes:S,errors:E}=Gt(),[P,$]=i.useState(!1);let _;e[5]!==s?(_=s("two_factor_auth.page_title"),e[5]=s,e[6]=_):_=e[6];let C;e[7]!==s?(C=s("two_factor_auth.heading_title"),e[7]=s,e[8]=C):C=e[8];let T;e[9]!==s?(T=s("two_factor_auth.heading_description"),e[9]=s,e[10]=T):T=e[10];let h;e[11]!==C||e[12]!==T?(h=r.jsx(qe,{title:C,description:T}),e[11]=C,e[12]=T,e[13]=h):h=e[13];let R;e[14]!==E||e[15]!==S||e[16]!==b||e[17]!==u||e[18]!==f||e[19]!==s||e[20]!==l?(R=l?r.jsxs("div",{className:"flex flex-col items-start justify-start space-y-4",children:[r.jsx(Se,{variant:"default",children:s("two_factor_auth.enabled")}),r.jsx("p",{className:"text-muted-foreground",children:s("two_factor_auth.enabled_description")}),r.jsx(Nt,{recoveryCodesList:f,fetchRecoveryCodes:S,errors:E}),r.jsx("div",{className:"relative inline",children:r.jsx(se,{method:"post",action:`/${u}/settings/two-factor/disable`,children:O=>{const{processing:A}=O;return r.jsxs(K,{variant:"destructive",type:"submit",disabled:A,children:[r.jsx(St,{})," ",s("two_factor_auth.disable_2fa")]})}})})]}):r.jsxs("div",{className:"flex flex-col items-start justify-start space-y-4",children:[r.jsx(Se,{variant:"destructive",children:s("two_factor_auth.disabled")}),r.jsx("p",{className:"text-muted-foreground",children:s("two_factor_auth.disabled_description")}),r.jsx("div",{children:b?r.jsxs(K,{onClick:()=>$(!0),children:[r.jsx(_e,{}),s("two_factor_auth.continue_setup")]}):r.jsx(se,{method:"post",action:`/${u}/settings/two-factor/enable`,onSuccess:()=>$(!0),children:O=>{const{processing:A}=O;return r.jsxs(K,{type:"submit",disabled:A,children:[r.jsx(_e,{}),s("two_factor_auth.enable_2fa")]})}})})]}),e[14]=E,e[15]=S,e[16]=b,e[17]=u,e[18]=f,e[19]=s,e[20]=l,e[21]=R):R=e[21];let F;e[22]===Symbol.for("react.memo_cache_sentinel")?(F=()=>$(!1),e[22]=F):F=e[22];let N;e[23]!==j||e[24]!==E||e[25]!==k||e[26]!==v||e[27]!==m||e[28]!==a||e[29]!==P||e[30]!==l?(N=r.jsx(nn,{isOpen:P,onClose:F,requiresConfirmation:a,twoFactorEnabled:l,qrCodeSvg:m,manualSetupKey:v,clearSetupData:j,fetchSetupData:k,errors:E}),e[23]=j,e[24]=E,e[25]=k,e[26]=v,e[27]=m,e[28]=a,e[29]=P,e[30]=l,e[31]=N):N=e[31];let w;e[32]!==R||e[33]!==N||e[34]!==h?(w=r.jsx(Ve,{children:r.jsxs("div",{className:"space-y-6",children:[h,R,N]})}),e[32]=R,e[33]=N,e[34]=h,e[35]=w):w=e[35];let I;return e[36]!==y||e[37]!==w||e[38]!==_?(I=r.jsx(ct,{breadcrumbs:y,title:_,children:w}),e[36]=y,e[37]=w,e[38]=_,e[39]=I):I=e[39],I}export{Rn as default};
