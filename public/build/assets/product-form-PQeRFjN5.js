import{c as Y,j as t,a as ee,F as te,r as se}from"./app-BtzcVJSZ.js";import{C as b,a as S,b as q,c as z,d as V}from"./card-2O0GJ5S6.js";import{F as re}from"./form-buttons-BpP5z_mx.js";import{c as ie,i as P,D as ae,u as de,H as $,n as J}from"./index-D0hpR7oJ.js";import{T as oe}from"./translatable-tabs-t1eZWBwa.js";import{L as T}from"./label--mTzXLB6.js";import{I as R}from"./input-D6zMSCMC.js";import{I as D}from"./input-error-Dxef5Q3z.js";import{S as K,a as O,b as Q,c as W,d as U}from"./select-BhvamzCJ.js";import{F as ce}from"./file-upload-XK916Jxh.js";import{I as ne}from"./is-active-Cj73K09j.js";import{B as X}from"./button-_2j1OZQp.js";/* empty css            */import"./spinner-TdLkdDQX.js";import"./loader-circle-B3Wnhkkd.js";import"./index-QF-I3Xry.js";import"./index-CICsx94S.js";import"./Combination-DatXQkSs.js";import"./index-XMeg5jyR.js";import"./index-_ZY-tmcq.js";import"./index-Dw9wq_YE.js";import"./chevron-down-DNiSk20B.js";import"./check-SMdF04aD.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],me=ie("Trash2",le);function pe(d){const e=Y.c(38),{name:s,value:j,onChange:g,createItem:E,renderRow:n,minItems:f,maxItems:o}=d;let r;e[0]!==j?(r=j===void 0?[]:j,e[0]=j,e[1]=r):r=e[1];const i=r,p=f===void 0?0:f;let N;e[2]!==s||e[3]!==g?(N=_=>{g({target:{name:s,value:_}})},e[2]=s,e[3]=g,e[4]=N):N=e[4];const c=N;let l;e[5]!==E||e[6]!==c||e[7]!==o||e[8]!==i?(l=()=>{o&&i.length>=o||c([...i,E()])},e[5]=E,e[6]=c,e[7]=o,e[8]=i,e[9]=l):l=e[9];const m=l;let u;e[10]!==c||e[11]!==p||e[12]!==i?(u=_=>{i.length<=p||c(i.filter((x,C)=>C!==_))},e[10]=c,e[11]=p,e[12]=i,e[13]=u):u=e[13];const A=u;let w;e[14]!==c||e[15]!==i?(w=(_,x)=>{c(i.map((C,Z)=>Z===_?{...C,...x}:C))},e[14]=c,e[15]=i,e[16]=w):w=e[16];const a=w,y=i.length>p,G=o?i.length<o:!0;let h;e[17]!==y||e[18]!==A||e[19]!==n||e[20]!==a||e[21]!==i?(h=i.length>0&&t.jsx("div",{className:"space-y-3",children:i.map((_,x)=>t.jsxs(b,{className:P("group relative overflow-hidden transition-all duration-200","border-border/50 hover:border-border hover:shadow-md","bg-card"),children:[t.jsxs("div",{className:"p-5 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between pb-3 border-b border-border/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-muted-foreground text-xs font-medium",children:x+1}),t.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Item ",x+1]})]}),t.jsx(X,{type:"button",variant:"ghost",size:"icon",onClick:()=>A(x),disabled:!y,className:P("h-8 w-8 transition-all duration-200","hover:bg-destructive/10 hover:text-destructive","disabled:opacity-40 disabled:cursor-not-allowed","group-hover:opacity-100"),children:t.jsx(me,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"pt-2",children:n(_,x,C=>a(x,C))})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-border to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},x))}),e[17]=y,e[18]=A,e[19]=n,e[20]=a,e[21]=i,e[22]=h):h=e[22];const v=!G,H=i.length===0&&"mt-0";let k;e[23]!==H?(k=P("w-full transition-all duration-200","border-dashed border-2","hover:border-primary/50 hover:bg-primary/5","disabled:opacity-50 disabled:cursor-not-allowed",H),e[23]=H,e[24]=k):k=e[24];let M;e[25]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(ae,{className:"h-4 w-4 mr-2"}),e[25]=M):M=e[25];const L=i.length===0?"Add First Item":"Add Another Item";let F;e[26]!==o||e[27]!==i.length?(F=o&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",i.length,"/",o,")"]}),e[26]=o,e[27]=i.length,e[28]=F):F=e[28];let I;e[29]!==m||e[30]!==k||e[31]!==L||e[32]!==F||e[33]!==v?(I=t.jsxs(X,{type:"button",variant:"outline",onClick:m,disabled:v,className:k,children:[M,L,F]}),e[29]=m,e[30]=k,e[31]=L,e[32]=F,e[33]=v,e[34]=I):I=e[34];let B;return e[35]!==I||e[36]!==h?(B=t.jsxs("div",{className:"space-y-4",children:[h,I]}),e[35]=I,e[36]=h,e[37]=B):B=e[37],B}function Le(d){const e=Y.c(26),{product:s,categories:j,additionsData:g,optionsData:E,type:n}=d;let f;e[0]!==g?(f=g===void 0?[]:g,e[0]=g,e[1]=f):f=e[1];const o=f,{t:r}=de("forms");let i;e[2]!==s.additions?(i=s.additions??[],e[2]=s.additions,e[3]=i):i=e[3];const[p,N]=ee.useState(i);console.log(p);const c=n==="edit"?"put":"post";let l;e[4]!==s.id||e[5]!==n?(l=n==="edit"&&s.id?$.update.url({product:Number(s.id)}):$.store.url(),e[4]=s.id,e[5]=n,e[6]=l):l=e[6];let m;e[7]!==p||e[8]!==o||e[9]!==j||e[10]!==s.category_id||e[11]!==s.compare_price||e[12]!==s.description||e[13]!==s.images||e[14]!==s.is_active||e[15]!==s.keywords||e[16]!==s.name||e[17]!==s.price||e[18]!==s.quantity||e[19]!==r||e[20]!==n?(m=A=>{const{processing:w,errors:a}=A;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-6 lg:grid lg:grid-cols-3 lg:gap-6 lg:space-y-0",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsx(oe,{fields:[{name:"name",label:r("products.name"),type:"text",value:J(s.name),placeholder:r("products.enter_name")},{name:"description",label:r("products.description"),type:"textarea",value:J(s.description)}],errors:a}),t.jsxs(b,{children:[t.jsxs(S,{children:[t.jsx(q,{children:r("products.keywords")}),t.jsx(z,{children:r("products.keywords_desc")})]}),t.jsx(V,{children:t.jsxs("div",{children:[t.jsx(T,{htmlFor:"keywords",children:r("products.keywords")}),t.jsx(R,{id:"keywords",name:"keywords",type:"text",defaultValue:Array.isArray(s.keywords)?s.keywords.join(", "):"",placeholder:r("products.enter_keywords"),"aria-invalid":a.keywords?"true":"false"}),t.jsx("span",{className:"text-muted-foreground text-xs",children:r("products.keywords_hint")}),t.jsx(D,{message:a.keywords})]})})]}),t.jsxs(b,{children:[t.jsxs(S,{children:[t.jsx(q,{children:r("products.product_images")}),t.jsx(z,{children:r("products.product_images_desc")})]}),t.jsx(V,{className:"space-y-4",children:t.jsx(ce,{name:"temp_ids",label:r("products.images"),multiple:!0,acceptedFileTypes:["image/*"],maxFiles:10,maxFileSize:"5MB",error:a.temp_ids,files:s.images?s.images.map(ge):[]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(b,{children:[t.jsx(S,{children:t.jsx(q,{children:r("products.pricing")})}),t.jsxs(V,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(T,{htmlFor:"price",children:r("products.price")}),t.jsx(R,{id:"price",name:"price",type:"number",step:"0.01",required:!0,defaultValue:s.price,placeholder:r("products.enter_price"),"aria-invalid":a.price?"true":"false"}),t.jsx(D,{message:a.price})]}),t.jsxs("div",{children:[t.jsx(T,{htmlFor:"compare_price",children:r("products.compare_price")}),t.jsx(R,{id:"compare_price",name:"compare_price",type:"number",step:"0.01",defaultValue:s.compare_price||"",placeholder:r("products.enter_compare_price"),"aria-invalid":a.compare_price?"true":"false"}),t.jsx("span",{className:"text-muted-foreground text-xs",children:r("products.compare_price_desc")}),t.jsx(D,{message:a.compare_price})]})]})]}),t.jsxs(b,{children:[t.jsxs(S,{children:[t.jsx(q,{children:r("products.product_category")}),t.jsx(z,{children:r("products.select_category")})]}),t.jsx(V,{children:t.jsxs("div",{children:[t.jsx(T,{htmlFor:"category_id",children:r("products.category")}),t.jsxs(K,{defaultValue:String(s.category_id),name:"category_id",children:[t.jsx(O,{id:"category_id","aria-invalid":a.category_id?"true":"false",children:t.jsx(Q,{placeholder:r("products.select_category")})}),t.jsxs(W,{children:[t.jsx(U,{value:"null",children:r("products.no_category")}),j.map(je)]})]}),t.jsx(D,{message:a.category_id})]})})]}),t.jsxs(b,{children:[t.jsx(S,{children:t.jsx(q,{children:r("products.product_settings")})}),t.jsxs(V,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(T,{htmlFor:"quantity",children:r("products.quantity")}),t.jsx(R,{id:"quantity",name:"quantity",type:"number",min:"0",defaultValue:s.quantity||0,placeholder:r("products.enter_quantity"),"aria-invalid":a.quantity?"true":"false"}),t.jsx(D,{message:a.quantity})]}),t.jsx(ne,{value:s.is_active})]})]})]})]}),t.jsx("div",{className:"flex gap-4 mt-4 items-start",children:t.jsxs(b,{className:"w-1/2 h-auto",children:[t.jsxs(S,{children:[t.jsx(q,{children:r("products.additions")}),t.jsx(z,{children:r("products.additions_desc")})]}),t.jsx(V,{className:"min-h-fit",children:t.jsx(pe,{name:"additions[]",value:p,onChange:y=>N(y.target.value),createItem:xe,renderRow:(y,G,h)=>t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs(K,{value:String(y.addition_id),onValueChange:v=>h({addition_id:v}),children:[t.jsx(O,{children:t.jsx(Q,{placeholder:"Addition"})}),t.jsx(W,{children:o.map(he)})]}),t.jsx(R,{type:"number",value:y.price,onChange:v=>h({price:Number(v.target.value)})})]})})})]})}),t.jsx(re,{processing:w,handleCancel:ue,isEditMode:n==="edit"})]})},e[7]=p,e[8]=o,e[9]=j,e[10]=s.category_id,e[11]=s.compare_price,e[12]=s.description,e[13]=s.images,e[14]=s.is_active,e[15]=s.keywords,e[16]=s.name,e[17]=s.price,e[18]=s.quantity,e[19]=r,e[20]=n,e[21]=m):m=e[21];let u;return e[22]!==c||e[23]!==l||e[24]!==m?(u=t.jsx(te,{method:c,action:l,children:m}),e[22]=c,e[23]=l,e[24]=m,e[25]=u):u=e[25],u}function ue(){return se.visit($.index.url())}function he(d){return t.jsx(U,{value:String(d.id),children:d.name},d.id)}function xe(){return{addition_id:"",price:0}}function je(d){return t.jsx(U,{value:String(d.id),children:d.name},d.id)}function ge(d){return{source:String(d.id)+"/"+d.file_name,options:{type:"local"}}}export{Le as default};
